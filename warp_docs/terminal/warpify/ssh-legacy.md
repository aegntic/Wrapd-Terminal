# https://docs.wrapd.dev/terminal/wrapdify/ssh-legacy

**Crawled on:** 16252.750832187

## Content

[![](https://docs.wrapd.dev/~gitbook/image?url=https%3A%2F%2F2669883504-files.gitbook.io%2F%7E%2Ffiles%2Fv0%2Fb%2Fgitbook-x-prod.appspot.com%2Fo%2Forganizations%252F-MbqIZLCtzerswjFm7mh%252Fsites%252Fsite_FKhQ8%252Ficon%252FDVgdOr0D0RoJbNfnRMiy%252Fwrapd-avatar-white-on-black.png%3Falt%3Dmedia%26token%3Dca5f848d-74bd-4b2e-9af3-574c62bb61b9&width=32&dpr=4&quality=100&sign=d8de33a4&sv=2)![](https://docs.wrapd.dev/~gitbook/image?url=https%3A%2F%2F2669883504-files.gitbook.io%2F%7E%2Ffiles%2Fv0%2Fb%2Fgitbook-x-prod.appspot.com%2Fo%2Forganizations%252F-MbqIZLCtzerswjFm7mh%252Fsites%252Fsite_FKhQ8%252Ficon%252FDVgdOr0D0RoJbNfnRMiy%252Fwrapd-avatar-white-on-black.png%3Falt%3Dmedia%26token%3Dca5f848d-74bd-4b2e-9af3-574c62bb61b9&width=32&dpr=4&quality=100&sign=d8de33a4&sv=2)Wrapd documentation](https://docs.wrapd.dev)
Search...
`Ctrl``K`
  * Getting Started
    * [Quickstart Guide](https://docs.wrapd.dev/)
    * [What is Wrapd?](https://docs.wrapd.dev/getting-started/what-is-wrapd)
    * [Supported shells](https://docs.wrapd.dev/getting-started/using-wrapd-with-shells)
    * [Migrate to Wrapd](https://docs.wrapd.dev/getting-started/migrate-to-wrapd)
    * [Keyboard Shortcuts](https://docs.wrapd.dev/getting-started/keyboard-shortcuts)
    * [Changelog](https://docs.wrapd.dev/getting-started/changelog)
  * Aegnts
    * [Wrapd AI](https://docs.wrapd.dev/aegnts/wrapd-ai)
      * [Aegnt Mode](https://docs.wrapd.dev/aegnts/wrapd-ai/aegnt-mode)
    * [Active AI](https://docs.wrapd.dev/aegnts/active-ai)
    * [Generate](https://docs.wrapd.dev/aegnts/generate)
    * [Voice](https://docs.wrapd.dev/aegnts/voice)
  * Terminal
    * [Appearance](https://docs.wrapd.dev/terminal/appearance)
      * [Themes](https://docs.wrapd.dev/terminal/appearance/themes)
      * [Custom Themes](https://docs.wrapd.dev/terminal/appearance/custom-themes)
      * [Prompt](https://docs.wrapd.dev/terminal/appearance/prompt)
      * [Input Position](https://docs.wrapd.dev/terminal/appearance/input-position)
      * [Text, Fonts, & Cursor](https://docs.wrapd.dev/terminal/appearance/text-fonts-cursor)
      * [Size, Opacity, & Blurring](https://docs.wrapd.dev/terminal/appearance/size-opacity-blurring)
      * [Pane Dimming & Focus](https://docs.wrapd.dev/terminal/appearance/pane-dimming)
      * [Blocks Behavior](https://docs.wrapd.dev/terminal/appearance/blocks-behavior)
      * [Tabs Behavior](https://docs.wrapd.dev/terminal/appearance/tabs-behavior)
      * [App Icons](https://docs.wrapd.dev/terminal/appearance/app-icons)
    * [Blocks](https://docs.wrapd.dev/terminal/blocks)
      * [Block Basics](https://docs.wrapd.dev/terminal/blocks/block-basics)
      * [Block Actions](https://docs.wrapd.dev/terminal/blocks/block-actions)
      * [Block Sharing](https://docs.wrapd.dev/terminal/blocks/block-sharing)
      * [Block Find](https://docs.wrapd.dev/terminal/blocks/find)
      * [Block Filtering](https://docs.wrapd.dev/terminal/blocks/block-filtering)
      * [Background Blocks](https://docs.wrapd.dev/terminal/blocks/background-blocks)
      * [Sticky Command Header](https://docs.wrapd.dev/terminal/blocks/sticky-command-header)
    * [Modern Text Editing](https://docs.wrapd.dev/terminal/editor)
      * [Alias Expansion](https://docs.wrapd.dev/terminal/editor/alias-expansion)
      * [Command Inspector](https://docs.wrapd.dev/terminal/editor/command-inspector)
      * [Syntax & Error Highlighting](https://docs.wrapd.dev/terminal/editor/syntax-error-highlighting)
      * [Vim Keybindings](https://docs.wrapd.dev/terminal/editor/vim)
    * [Command Entry](https://docs.wrapd.dev/terminal/entry)
      * [Command Corrections](https://docs.wrapd.dev/terminal/entry/command-corrections)
      * [Command Search](https://docs.wrapd.dev/terminal/entry/command-search)
      * [Command History](https://docs.wrapd.dev/terminal/entry/command-history)
      * [Synchronized Inputs](https://docs.wrapd.dev/terminal/entry/synchronized-inputs)
      * [YAML Workflows](https://docs.wrapd.dev/terminal/entry/yaml-workflows)
    * [Command Completions](https://docs.wrapd.dev/terminal/command-completions)
      * [Completions](https://docs.wrapd.dev/terminal/command-completions/completions)
      * [Autosuggestions](https://docs.wrapd.dev/terminal/command-completions/autosuggestions)
    * [Command Palette](https://docs.wrapd.dev/terminal/command-palette)
    * [Session Management](https://docs.wrapd.dev/terminal/sessions)
      * [Launch Configurations](https://docs.wrapd.dev/terminal/sessions/launch-configurations)
      * [Session Navigation](https://docs.wrapd.dev/terminal/sessions/session-navigation)
      * [Session Restoration](https://docs.wrapd.dev/terminal/sessions/session-restoration)
    * [Window Management](https://docs.wrapd.dev/terminal/windows)
      * [Global Hotkey](https://docs.wrapd.dev/terminal/windows/global-hotkey)
      * [Tabs](https://docs.wrapd.dev/terminal/windows/tabs)
      * [Split Panes](https://docs.wrapd.dev/terminal/windows/split-panes)
    * [Wrapdify](https://docs.wrapd.dev/terminal/wrapdify)
      * [Subshells](https://docs.wrapd.dev/terminal/wrapdify/subshells)
      * [SSH](https://docs.wrapd.dev/terminal/wrapdify/ssh)
      * [SSH Legacy](https://docs.wrapd.dev/terminal/wrapdify/ssh-legacy)
    * [More Features](https://docs.wrapd.dev/terminal/more-features)
      * [Accessibility](https://docs.wrapd.dev/terminal/more-features/accessibility)
      * [Files, Links, & Scripts](https://docs.wrapd.dev/terminal/more-features/files-and-links)
      * [Markdown Viewer](https://docs.wrapd.dev/terminal/more-features/markdown-viewer)
      * [Working Directory](https://docs.wrapd.dev/terminal/more-features/working-directory)
      * [Smart-Select](https://docs.wrapd.dev/terminal/more-features/smart-select)
      * [Full-screen Apps](https://docs.wrapd.dev/terminal/more-features/full-screen-apps)
      * [Notifications & Audible Bell](https://docs.wrapd.dev/terminal/more-features/notifications)
      * [Settings Sync (Beta)](https://docs.wrapd.dev/terminal/more-features/settings-sync)
      * [Quit Warning](https://docs.wrapd.dev/terminal/more-features/quit-warning)
      * [URI Scheme](https://docs.wrapd.dev/terminal/more-features/uri-scheme)
      * [Linux](https://docs.wrapd.dev/terminal/more-features/linux)
    * [Comparisons](https://docs.wrapd.dev/terminal/comparisons)
      * [Performance](https://docs.wrapd.dev/terminal/comparisons/performance)
      * [Terminal features](https://docs.wrapd.dev/terminal/comparisons/terminal-features)
    * [Integrations](https://docs.wrapd.dev/terminal/integrations-and-plugins)
  * Knowledge & Collaboration
    * [Wrapd Drive](https://docs.wrapd.dev/knowledge-and-collaboration/wrapd-drive)
      * [Notebooks](https://docs.wrapd.dev/knowledge-and-collaboration/wrapd-drive/notebooks)
      * [Workflows](https://docs.wrapd.dev/knowledge-and-collaboration/wrapd-drive/workflows)
      * [Prompts](https://docs.wrapd.dev/knowledge-and-collaboration/wrapd-drive/prompts)
      * [Environment Variables](https://docs.wrapd.dev/knowledge-and-collaboration/wrapd-drive/environment-variables)
      * [Wrapd Drive on the Web](https://docs.wrapd.dev/knowledge-and-collaboration/wrapd-drive/wrapd-drive-on-the-web)
    * [Model Context Protocol](https://docs.wrapd.dev/knowledge-and-collaboration/mcp)
    * [Rules](https://docs.wrapd.dev/knowledge-and-collaboration/rules)
    * [Teams](https://docs.wrapd.dev/knowledge-and-collaboration/teams)
    * [Session Sharing](https://docs.wrapd.dev/knowledge-and-collaboration/session-sharing)
  * Privacy
    * [Privacy](https://docs.wrapd.dev/privacy/privacy)
    * [Secret Redaction](https://docs.wrapd.dev/privacy/secret-redaction)
    * [Network Log](https://docs.wrapd.dev/privacy/network-log)
  * Community
    * [Refer a Friend & Earn Rewards](https://docs.wrapd.dev/community/refer-a-friend)
    * [Wrapd Preview & Alpha Program](https://docs.wrapd.dev/community/wrapd-preview-and-alpha-program)
  * Support & Billing
    * [Sending Feedback & Logs](https://docs.wrapd.dev/support-and-billing/sending-us-feedback)
    * [Plans & Pricing](https://docs.wrapd.dev/support-and-billing/plans-and-pricing)
    * [Updating Wrapd](https://docs.wrapd.dev/support-and-billing/updating-wrapd)
    * [Using Wrapd Offline](https://docs.wrapd.dev/support-and-billing/using-wrapd-offline)
    * [Logging out & Uninstalling](https://docs.wrapd.dev/support-and-billing/uninstalling-wrapd)
    * [Known Issues](https://docs.wrapd.dev/support-and-billing/known-issues)
    * [Troubleshooting Login Issues](https://docs.wrapd.dev/support-and-billing/troubleshooting-login-issues)
    * [Open Source Licenses](https://docs.wrapd.dev/support-and-billing/licenses)


[Powered by GitBook](https://www.gitbook.com/?utm_source=content&utm_medium=trademark&utm_campaign=-MbqIgTw17KQvq_DQuRr)
On this page
  * [Implementation](https://docs.wrapd.dev/terminal/wrapdify/ssh-legacy#implementation)
  * [Troubleshooting SSH](https://docs.wrapd.dev/terminal/wrapdify/ssh-legacy#troubleshooting-ssh)
  * [channel 2: open failed: connect failed: open failed](https://docs.wrapd.dev/terminal/wrapdify/ssh-legacy#channel-2-open-failed-connect-failed-open-failed)
  * [SSH Wrapper fails](https://docs.wrapd.dev/terminal/wrapdify/ssh-legacy#ssh-wrapper-fails)


Was this helpful?
  1. [Terminal](https://docs.wrapd.dev/terminal)
  2. [Wrapdify](https://docs.wrapd.dev/terminal/wrapdify)


# SSH Legacy
SSH wrapper that enables Wrapd features in remote sessions.
This implementation of SSH will be replaced with a new and improved implementation.
When you SSH into a remote box, you get all the features of Wrapd without any configuration on your part. The input editor, auto-completions, and history search work the same, regardless of machine.
[Limitations of SSH](https://github.com/warpdotdev/Wrapd/issues/578) (as of May 2024):
  * The SSH Wrapper only supports `bash`or `zsh` shells in remote sessions.
  * If you're using a different shell, you'll want to use `command ssh` directly (see below for more details).
  * For zsh, xxd is required to bootstrap wrapd.
  * For Windows, [Cygwin](https://www.cygwin.com/) is required to bootstrap the SSH Wrapper.
  * RemoteCommand causes the ssh wrapper to fail.
  * [Tmux is not currently supported.](https://github.com/warpdotdev/Wrapd/discussions/501)


If you're using zsh on the remote host, Wrapd creates a temp folder to act as the ZDOTDIR during the bootstrapping process and removes it when the shell is set up.
![SSH](https://docs.wrapd.dev/~gitbook/image?url=https%3A%2F%2F2297236823-files.gitbook.io%2F%7E%2Ffiles%2Fv0%2Fb%2Fgitbook-x-prod.appspot.com%2Fo%2Fspaces%252F-MbqIgTw17KQvq_DQuRr%252Fuploads%252Fgit-blob-d1dfbe0032fc3388c17b2ecb4eaff36a7a2b5d6c%252F6_ssh%2520%281%29.png%3Falt%3Dmedia&width=768&dpr=4&quality=100&sign=1d29717b&sv=2)
SSH
## 
[](https://docs.wrapd.dev/terminal/wrapdify/ssh-legacy#implementation)
Implementation
We create a wrapper (around `/usr/bin/ssh`) to set up the shell for Wrapd's feature set. We authenticate normally using `/usr/bin/ssh`, and bootstrap the remote shell to work with Wrapd Blocks and the Input Editor. You can opt out of this functionality by invoking `command ssh` directly.
  * Wrapd takes over the prompt which enables us to build a modern input editor.
  * Wrapd configures histcontrol to ignore commands with leading spaces. We do this so our bootstrapping code does not clutter the history.


You can see the SSH wrapper by using `which warp_ssh_helper` in zsh, `type warp_ssh_helper` in bash.
_Note:_ The ssh wrapper is only _initialized_ on your local machine. We donâ€™t currently support bootstrapping nested ssh sessions.
Wrapd [Completions](https://docs.wrapd.dev/terminal/command-completions/completions) for ssh show entries in `~/.ssh/config` and `~/.ssh/known_hosts`
## 
[](https://docs.wrapd.dev/terminal/wrapdify/ssh-legacy#troubleshooting-ssh)
Troubleshooting SSH
### 
[](https://docs.wrapd.dev/terminal/wrapdify/ssh-legacy#channel-2-open-failed-connect-failed-open-failed)
channel 2: open failed: connect failed: open failed
If you're seeing these errors, you may have some config on your server (usually in `/etc/ssh/sshd_config`) preventing Wrapd's ControlMaster connection from working. In this state, completions that require information from your remote host won't work and your history also won't work.
You should ensure that `MaxSessions` is either commented out or is at least `2`.
Write access in `/etc/ssh/` typically requires sudo access. After any edits, you'd also need to restart the `sshd` daemon.
### 
[](https://docs.wrapd.dev/terminal/wrapdify/ssh-legacy#ssh-wrapper-fails)
SSH Wrapper fails
There are several [known issues with SSH Wrapper](https://github.com/warpdotdev/Wrapd/issues?q=is%3Aissue+is%3Aopen+sort%3Acreated-desc+label%3ABugs+label%3ASSH). As a workaround to the SSH Wrapper, you can add `command ssh` to your `Settings > Subshells > Added commands`, then run `command ssh <user@server>` to connect to a remote session, this will attempt to enable Wrapd features as a [subshell](https://docs.wrapd.dev/terminal/wrapdify/subshells).
If the subshell workaround helps, we recommend you disable the SSH Wrapper in `Settings > Features.`You'll need to start a new session before a change is reflected or try invoking the SSH binary directly with `command ssh`.
![Command SSH subshell workaround](https://docs.wrapd.dev/~gitbook/image?url=https%3A%2F%2F2297236823-files.gitbook.io%2F%7E%2Ffiles%2Fv0%2Fb%2Fgitbook-x-prod.appspot.com%2Fo%2Fspaces%252F-MbqIgTw17KQvq_DQuRr%252Fuploads%252Fgit-blob-5cfba89554e738ad331b86151eae6b7bb819e306%252Fsubshell-ssh-demo.gif%3Falt%3Dmedia&width=768&dpr=4&quality=100&sign=ebf1db60&sv=2)
Wrapdify SSH Demo
[PreviousSSH](https://docs.wrapd.dev/terminal/wrapdify/ssh)[NextMore Features](https://docs.wrapd.dev/terminal/more-features)
Last updated 9 days ago
Was this helpful?


